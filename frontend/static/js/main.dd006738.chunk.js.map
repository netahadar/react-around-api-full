{"version":3,"sources":["blocks/images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeletePostPopup.js","components/InfoTooltip.js","blocks/images/fail.svg","components/Login.js","blocks/images/success.svg","components/Register.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","link","text","loggedIn","email","onLogOut","className","src","logoPath","alt","to","onClick","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onDeletePostClick","currentUser","useContext","isOwn","owner","_id","galleryTrashButtonClassName","isLiked","likes","some","user","galleryLikeButtonClassName","type","style","backgroundImage","name","length","Main","onEditProfileClick","onAddPlaceClick","onEditAvatarClick","cards","avatar","about","map","Footer","ImagePopup","onClose","api","baseUrl","headers","this","_baseUrl","_headers","fetchCall","bind","url","fetch","then","res","ok","json","Promise","reject","statusText","data","method","body","JSON","stringify","obj","cardId","cardID","_dislike","_addLike","authorization","localStorage","jwt","PopupWithForm","props","isOpen","onSubmit","title","children","buttonTitle","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","id","value","onChange","filteredValue","target","replace","placeholder","minLength","maxLength","required","EditAvatarPopup","onUpdateAvatar","avatarLink","useRef","current","ref","AddPlacePopup","onAddPlaceSubmit","place","setPlace","setLink","DeletePostPopup","onDeletePostSubmit","InfoTooltip","Login","onLogin","password","values","setValues","handleChange","failPath","Register","onRegister","isSuccess","successPath","ProtectedRoute","BASE_URL","App","history","useHistory","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isDeletePostPopupOpen","setIsDeletePostPopupOpen","isInfoPopupOpen","setIsInfoPopupOpen","infoTitle","setInfoTitle","selectedCard","setSelectedCard","setCurrentUser","setCards","deleteCard","setDeletedCard","setLoggedIn","setEmail","checkToken","getItem","token","auth","push","catch","console","log","closeAllPopups","getInitialCards","closeByEscape","key","document","addEventListener","removeEventListener","Provider","path","Error","err","finally","setItem","removeItem","changeLikeCardStatus","newCard","cardsState","item","newData","setUserInfo","createNewCard","Array","isArray","newCards","filter","setUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.dd006738.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c7581985.svg\";","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport logoPath from \"../blocks/images/logo.svg\";\r\n\r\nexport default function Header({ link, text, loggedIn, email, onLogOut}) {\r\n  return (\r\n    <header className=\"header\">\r\n      <img className=\"header__logo\" src={logoPath} alt=\"around the u.s. logo\" />\r\n      <div className=\"header__container\">\r\n        {loggedIn ? (\r\n          <>\r\n            <p className=\"header__email\">{email}</p>\r\n            <Link to={link} className=\"header__link\" onClick={onLogOut}>\r\n              Log Out\r\n            </Link>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Link to={link} className=\"header__link\">\r\n              {text}\r\n            </Link>\r\n          </>\r\n        )}\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport default function Card({\r\n  card,\r\n  onCardClick,\r\n  onCardLike,\r\n  onDeletePostClick,\r\n}) {\r\n  //Subscribing to user info context:\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeletePostClick() {\r\n    onDeletePostClick(card);\r\n  }\r\n\r\n  // Checking if the current user is the owner of the current card:\r\n  const isOwn = card.owner === currentUser._id;\r\n\r\n  // Creating a variable to set in `className` for the delete button:\r\n  const galleryTrashButtonClassName = `gallery__trash-button ${\r\n    isOwn ? \"gallery__trash-button_visible\" : \"gallery__trash-button_hidden\"\r\n  }`;\r\n\r\n  // Check if the card was liked by the current user\r\n  const isLiked = card.likes.some((user) => user._id === currentUser._id);\r\n\r\n  // Create a variable to set in `className` for the like button:\r\n  const galleryLikeButtonClassName = `gallery__like-button ${\r\n    isLiked && \"gallery__like-button_active\"\r\n  }`;\r\n\r\n  return (\r\n    <li className=\"gallery__item\">\r\n      <button\r\n        className={galleryTrashButtonClassName}\r\n        type=\"button\"\r\n        aria-label=\"delete button\"\r\n        onClick={handleDeletePostClick}\r\n      ></button>\r\n      <div\r\n        className=\"gallery__photo\"\r\n        style={{ backgroundImage: `url(${card.link})` }}\r\n        onClick={handleClick}\r\n      />\r\n      <div className=\"gallery__description\">\r\n        <h2 className=\"gallery__text\">{card.name}</h2>\r\n        <div className=\"gallery__like-container\">\r\n          <button\r\n            className={galleryLikeButtonClassName}\r\n            type=\"button\"\r\n            aria-label=\"like button\"\r\n            onClick={handleLikeClick}\r\n          ></button>\r\n          <p className=\"gallery__like-counter\">{card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Card from \"./Card\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport default function Main({\r\n  onEditProfileClick,\r\n  onAddPlaceClick,\r\n  onEditAvatarClick,\r\n  onDeletePostClick,\r\n  onCardClick,\r\n  cards,\r\n  onCardLike,\r\n}) {\r\n  //Subscribing to user info context:\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"profile\">\r\n        <div\r\n          className=\"profile__avatar-container\"\r\n          style={{ backgroundImage: `url(\"${currentUser.avatar}\")` }}\r\n        >\r\n          <button\r\n            className=\"profile__avatar-edit\"\r\n            onClick={onEditAvatarClick}\r\n          ></button>\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__info-title\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button\r\n              className=\"profile__edit-button\"\r\n              type=\"button\"\r\n              aria-label=\"edit button\"\r\n              onClick={onEditProfileClick}\r\n            ></button>\r\n          </div>\r\n          <p className=\"profile__job-description\">{currentUser.about}</p>\r\n        </div>\r\n        <button\r\n          className=\"profile__add-button\"\r\n          type=\"button\"\r\n          aria-label=\"add button\"\r\n          onClick={onAddPlaceClick}\r\n        ></button>\r\n      </section>\r\n\r\n      <section className=\"gallery\">\r\n        <ul className=\"gallery__list\">\r\n          {cards.map((card) => {\r\n            return (\r\n              <Card\r\n                card={card}\r\n                key={card._id}\r\n                onCardClick={onCardClick}\r\n                onCardLike={onCardLike}\r\n                onDeletePostClick={onDeletePostClick}\r\n              />\r\n            );\r\n          })}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyrights\">© 2021 Neta Hadar Itzhak</p>\r\n    </footer>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function ImagePopup({card, onClose}) {\r\n  return (\r\n    <div className={`popup popup_type_photo ${card.name ? \"popup_opened\" : ''}`}>\r\n      <div className=\"popup__container popup__container_type_photo\">\r\n        <button\r\n          className=\"popup__close-button popup__close-button_type_photo\"\r\n          type=\"button\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <div className=\"popup__photo\"  style={{ backgroundImage: `url(${card.link})` }}/>\r\n        <h3 className=\"popup__text\">{card.name}</h3>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\r\n  \r\n  class Api {\r\n    constructor(baseUrl, headers) {\r\n      this._baseUrl = baseUrl;\r\n      this._headers = headers;\r\n      this.fetchCall = this.fetchCall.bind(this);\r\n    }\r\n\r\n    fetchCall(url, headers) {\r\n      return fetch(url, headers)\r\n        .then((res) => {\r\n          if (res.ok) {\r\n            return res.json();\r\n          }\r\n    \r\n          Promise.reject(`ERROR: ${res.statusText}`);\r\n        })\r\n    };\r\n  \r\n    //Get user info from server:\r\n    getUserInfo() {\r\n      return this.fetchCall(`${this._baseUrl}/users/me`, {\r\n        headers: this._headers,\r\n      });\r\n    }\r\n  \r\n    //Update user avatar:\r\n    setUserAvatar(data) {\r\n      return this.fetchCall(`${this._baseUrl}/users/me/avatar`, {\r\n        method: \"PATCH\",\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          //New avatar link:\r\n          avatar: data.avatar,\r\n        })\r\n      });\r\n    }\r\n\r\n    //Get initial cards from server:\r\n    getInitialCards() {\r\n      return this.fetchCall(`${this._baseUrl}/cards`, {\r\n        method:\"GET\",\r\n        headers: this._headers,\r\n      });\r\n    }\r\n  \r\n    //Send new profile data to server:\r\n    setUserInfo(obj) {\r\n      return this.fetchCall(`${this._baseUrl}/users/me`, {\r\n        method: \"PATCH\",\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          //New profile data:\r\n          name: obj.name,\r\n          about: obj.about,\r\n        }),\r\n      });\r\n    }\r\n  \r\n    //Add new card:\r\n    createNewCard(obj) {\r\n      return this.fetchCall(`${this._baseUrl}/cards`, {\r\n        method: \"POST\",\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          //New card data:\r\n          name: obj.name,\r\n          link: obj.link,\r\n        }),\r\n      });\r\n    }\r\n  \r\n    //Delete card:\r\n    deleteCard(cardId) {\r\n      return this.fetchCall(`${this._baseUrl}/cards/${cardId}`, {\r\n        method: \"DELETE\",\r\n        headers: this._headers,\r\n      });\r\n    }\r\n  \r\n    //Add like to card:\r\n    _addLike(cardId) {\r\n      return this.fetchCall(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n        method: \"PUT\",\r\n        headers: this._headers,\r\n      });\r\n    }\r\n  \r\n    //Remove like from card:\r\n    _dislike(cardId) {\r\n      return this.fetchCall(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n        method: \"DELETE\",\r\n        headers: this._headers,\r\n      });\r\n    }\r\n\r\n    //toggle likes:\r\n    changeLikeCardStatus(cardID, isLiked){\r\n      if (isLiked){\r\n        return this._dislike(cardID);\r\n      } else {\r\n        return this._addLike(cardID);\r\n      }\r\n    }\r\n  }\r\n  \r\n  const api = new Api(\"http://netahadar.students.nomoreparties.sbs\", {\r\n    authorization: `Bearer ${localStorage.jwt}`,\r\n    \"Content-Type\": \"application/json\",\r\n  });\r\n  \r\n  export default api;","import React from \"react\";\r\n\r\nexport default function PopupWithForm(props){\r\n    return(\r\n        <div className={`popup popup_type_${props.name} ${props.isOpen ? \"popup_opened\":''}`} >\r\n          <div className=\"popup__container\">\r\n            <button className=\"popup__close-button\" type=\"button\" onClick={props.onClose}></button>\r\n            <form className=\"popup__form\" name={props.name}  onSubmit={props.onSubmit}>\r\n              <h2 className=\"popup__form-title\">{props.title}</h2>\r\n              {props.children}\r\n              <button className=\"popup__form-submit-button\" type=\"submit\">\r\n                {props.buttonTitle}\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n    );\r\n}","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport default function EditProfilePopup({isOpen, onClose, onUpdateUser}) {\r\n  const [name, setName] = React.useState(\"\");\r\n  const [description, setDescription] = React.useState(\"\");\r\n\r\n  function handleNameChange(e) {\r\n    // Disallow special characters to prevent XSS\r\n    const filteredValue = e.target.value.replace(/[*|\\\"<>[\\]{}`;&$]+/, \" \");\r\n    setName(filteredValue);\r\n  }\r\n\r\n  function handleDescriptionChange(e) {\r\n    // Disallow special characters to prevent XSS\r\n    const filteredValue = e.target.value.replace(/[*|\\\"<>[\\]{}`;&$]+/, \" \");\r\n    setDescription(filteredValue);\r\n  }\r\n\r\n  // Subscription to the context\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  // After loading the current user from the API\r\n  // their data will be used in managed components.\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, isOpen]);\r\n\r\n  //submit handler:\r\n  function handleSubmit(e) {\r\n    // Prevent the browser from navigating to the form address\r\n    e.preventDefault();\r\n\r\n    // Pass the values to the external handler\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile\"\r\n      title=\"Edit Profile\"\r\n      buttonTitle=\"Save\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        className=\"popup__form-input\"\r\n        id=\"name-input\"\r\n        type=\"text\"\r\n        name=\"name\"\r\n        value={name}\r\n        onChange={handleNameChange}\r\n        placeholder=\"full name\"\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        required\r\n      />\r\n      <span id=\"name-input-error\"></span>\r\n      <input\r\n        className=\"popup__form-input\"\r\n        id=\"job-input\"\r\n        type=\"text\"\r\n        name=\"about\"\r\n        value={description}\r\n        onChange={handleDescriptionChange}\r\n        placeholder=\"job title\"\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        required\r\n      />\r\n      <span id=\"job-input-error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n  const avatarLink = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    // Disallow special characters to prevent XSS\r\n    const filteredValue = avatarLink.current.value.replace(/[*|\\\"<>[\\]{}`;&$]+/, \" \");\r\n    onUpdateAvatar({\r\n      avatar: filteredValue,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avatar\"\r\n      title=\"Change profile picture\"\r\n      buttonTitle=\"Save\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        className=\"popup__form-input\"\r\n        id=\"avatar-link\"\r\n        type=\"url\"\r\n        name=\"link\"\r\n        placeholder=\"avatar link\"\r\n        ref={avatarLink}\r\n        required\r\n      />\r\n      <span id=\"avatar-link-error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function AddPlacePopup({isOpen, onClose, onAddPlaceSubmit}) {\r\n  const [place, setPlace] = React.useState(\"\");\r\n  const [link, setLink] = React.useState(\"\");\r\n\r\n  React.useEffect(() => {\r\n    setPlace(\"\");\r\n    setLink(\"\");\r\n  }, [isOpen])\r\n\r\n  function handlePlaceChange(e) {\r\n    // Disallow special characters to prevent XSS\r\n    const filteredValue = e.target.value.replace(/[*|\\\"<>[\\]{}`;&$]+/, \" \")\r\n    setPlace(filteredValue);\r\n  }\r\n\r\n  function handleLinkChange(e) {\r\n    // Disallow special characters to prevent XSS\r\n    const filteredValue = e.target.value.replace(/[*|\\\"<>[\\]{}`;&$]+/, \" \")\r\n    setLink(filteredValue);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    // Pass the values to the external handler\r\n    onAddPlaceSubmit({\r\n        name: place,\r\n        link: link\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"post\"\r\n      title=\"New place\"\r\n      buttonTitle=\"Create\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        className=\"popup__form-input\"\r\n        id=\"title-input\"\r\n        type=\"text\"\r\n        name=\"name\"\r\n        value={place}\r\n        onChange={handlePlaceChange}\r\n        placeholder=\"Title\"\r\n        minLength=\"1\"\r\n        maxLength=\"30\"\r\n        required\r\n      />\r\n      <span id=\"title-input-error\"></span>\r\n      <input\r\n        className=\"popup__form-input\"\r\n        id=\"link-input\"\r\n        type=\"url\"\r\n        name=\"link\"\r\n        value={link}\r\n        onChange={handleLinkChange}\r\n        placeholder=\"Image link\"\r\n        required\r\n      />\r\n      <span id=\"link-input-error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function DeletePostPopup({\r\n  isOpen,\r\n  onClose,\r\n  onDeletePostSubmit,\r\n}) {\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onDeletePostSubmit();\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"delete\"\r\n      title=\"Are you sure?\"\r\n      buttonTitle=\"Yes\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function InfoTooltip(props) {\r\n\r\n    \r\n\r\n    return(\r\n        <div className={`popup popup_type_${props.name} ${props.isOpen ? \"popup_opened\":''}`} >\r\n          <div className=\"popup__frame\">\r\n            <button className=\"popup__close-button\" type=\"button\" onClick={props.onClose}></button>\r\n            <img src={props.src} className=\"popup__status-image\" alt=\"request status\"></img>\r\n            <h2 className=\"popup__title\">{props.title}</h2>\r\n          </div>\r\n        </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/fail.df8eddf6.svg\";","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\nimport failPath from \"../blocks/images/fail.svg\";\r\n\r\n\r\nexport default function Login({ onLogin, onClose, isOpen }) {\r\n  const [values, setValues] = React.useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  function handleChange(e) {\r\n    const { name, value } = e.target;\r\n    // Disallow special characters to prevent XSS\r\n    let filteredValue = value.replace(/[*|\\\"<>[\\]{}`;&$]+/, \" \");\r\n    setValues( {...values, [name]: filteredValue} );\r\n  }\r\n\r\n  //submit handler:\r\n  function handleSubmit(e) {\r\n    // Prevent the browser from navigating to the form address\r\n    e.preventDefault();\r\n\r\n    // Pass the values to the external handler\r\n    onLogin(values)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"signing\">\r\n        <h1 className=\"signing__title\">Log In</h1>\r\n        <form className=\"signing__form\" onSubmit={handleSubmit}>\r\n          <input\r\n            className=\"signing__form-input\"\r\n            name=\"email\"\r\n            placeholder=\"Email\"\r\n            required\r\n            type=\"email\"\r\n            value={values.email}\r\n            onChange={handleChange}\r\n          ></input>\r\n          <input\r\n            className=\"signing__form-input\"\r\n            name=\"password\"\r\n            placeholder=\"Password\"\r\n            required\r\n            type=\"password\"\r\n            value={values.password}\r\n            onChange={handleChange}\r\n          ></input>\r\n          <button className=\"signing__form-submit-button\" type=\"submit\">Log In</button>\r\n        </form>\r\n        <Link to=\"/signup\" className=\"signing__link\">Not a member yet? Sign up here!</Link>\r\n      </div>\r\n      <InfoTooltip\r\n                isOpen={isOpen}\r\n                name=\"info\"\r\n                title= \"Oops, something went wrong! Please try again.\"\r\n                src={failPath}\r\n                onClose={onClose}\r\n              />\r\n    </>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\nimport successPath from \"../blocks/images/success.svg\";\r\nimport failPath from \"../blocks/images/fail.svg\";\r\n\r\nexport default function Register({ onRegister, onClose, isOpen, isSuccess }) {\r\n  const [values, setValues] = React.useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  function handleChange(e) {\r\n    const { name, value} = e.target;\r\n    // Disallow special characters to prevent XSS\r\n    let filteredValue = value.replace(/[*|\\\"<>[\\]{}`;&$]+/, \" \");\r\n    setValues({...values, [name]: filteredValue});\r\n  }\r\n\r\n\r\n  //submit handler:\r\n  function handleSubmit(e) {\r\n    // Prevent the browser from navigating to the form address\r\n    e.preventDefault();\r\n\r\n    // Pass the values to the external handler\r\n    onRegister( values )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"signing\">\r\n        <h1 className=\"signing__title\">Sign Up</h1>\r\n        <form className=\"signing__form\" onSubmit={handleSubmit}>\r\n          <input\r\n            className=\"signing__form-input\"\r\n            name=\"email\"\r\n            placeholder=\"Email\"\r\n            required\r\n            type=\"email\"\r\n            value={values.email}\r\n            onChange={handleChange}\r\n          ></input>\r\n          <input\r\n            className=\"signing__form-input\"\r\n            name=\"password\"\r\n            placeholder=\"Password\"\r\n            required\r\n            type=\"password\"\r\n            value={values.password}\r\n            onChange={handleChange}\r\n          ></input>\r\n          <button className=\"signing__form-submit-button\" type=\"submit\">Sign Up</button>\r\n        </form>\r\n        <Link to=\"/signin\" className=\"signing__link\" >Already a member? Log in here!</Link>\r\n      </div>\r\n      <InfoTooltip\r\n                isOpen={isOpen}\r\n                name=\"info\"\r\n                title={\r\n                  isSuccess\r\n                    ? \"Success! You have now been registered.\"\r\n                    : \"Oops, something went wrong! Please try again.\"\r\n                }\r\n                src={isSuccess ? successPath : failPath}\r\n                onClose={onClose}\r\n              />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nfunction ProtectedRoute({ children, loggedIn, ...props }) {\r\n\r\n  return (\r\n    <Route {...props}>\r\n      {loggedIn ? children : <Redirect to={\"/signin\"} />}\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import api from \"./api\";\r\nexport const BASE_URL = \"http://netahadar.students.nomoreparties.sbs\";\r\n\r\nexport function register({ email, password }) {\r\n  return api.fetchCall(`${BASE_URL}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ email, password }),\r\n  })\r\n  .then((data) => {\r\n    if (data) {\r\n      return data;\r\n            }\r\n      else{\r\n        throw new Error(\"User with this email address already exists\");\r\n      }\r\n  });\r\n}\r\n\r\nexport function authorize({ email, password }) {\r\n  return api.fetchCall(`${BASE_URL}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ email, password }),\r\n  })\r\n    .then((data) => {\r\n      if (data) {\r\n        return localStorage.setItem(\"jwt\", data.token);\r\n      } else {\r\n        throw new Error(\"the user with the specified email not found\");\r\n      }\r\n    })\r\n}\r\n\r\nexport function getContent(token) {\r\n    return api.fetchCall(`${BASE_URL}/users/me`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`,\r\n        }\r\n      })\r\n  } \r\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport api from \"../utils/api\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport DeletePostPopup from \"./DeletePostPopup\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport * as auth from \"../utils/auth\";\nimport { useHistory } from \"react-router\";\n\nfunction App() {\n  const history = useHistory();\n\n  //State for edit avatar popup:\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\n    React.useState(false);\n\n  //State for edit profile popup:\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n\n  //State for add post popup:\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n\n  //State for delete post popup:\n  const [isDeletePostPopupOpen, setIsDeletePostPopupOpen] =\n    React.useState(false);\n\n  //States for info popup:\n  const [isInfoPopupOpen, setIsInfoPopupOpen] = React.useState(false);\n  const [infoTitle, setInfoTitle] = React.useState(false);\n\n  //State for full sized image popup:\n  const [selectedCard, setSelectedCard] = React.useState({\n    name: \"\",\n    link: \"\",\n  });\n\n  //State for user data:\n  const [currentUser, setCurrentUser] = React.useState({\n    name: \"\",\n    about: \"\",\n    avatar: \"\",\n    _id: \"\",\n  });\n\n  //States for getting initial cards from server:\n  const [cards, setCards] = React.useState([]);\n\n  //State for deleted card\n  const [deleteCard, setDeletedCard] = React.useState({\n    _id: \"\",\n  });\n\n  //State for login\n  const [loggedIn, setLoggedIn] = React.useState(false);\n\n  //State for user email\n  const [email, setEmail] = React.useState('');\n\n  //State for token\n  const [token, setToken] = React.useState('');\n\n  //API request for getting initial cards data:\n  React.useEffect(() => {\n    api\n      .getInitialCards()\n      .then((res) => {\n        setCards(res);\n      })\n      .catch(console.log);\n  }, []);\n\n  // Validate token\n  function checkToken() {\n    if (localStorage.getItem(\"jwt\")) {\n      const jwt = localStorage.getItem(\"jwt\");\n      auth\n        .getContent(jwt)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            setEmail(res.email);\n            setCurrentUser({\n              name: res.name,\n              about: res.about,\n              avatar: res.avatar,\n              _id: res._id,\n            })\n            api._headers = {\n              authorization: `Bearer ${localStorage.jwt}`,\n              \"Content-Type\": \"application/json\",\n            }\n            history.push(\"/\");\n          }\n        })\n        .catch(console.log);\n    }\n  }\n\n  // Keep returning users logged in\n  React.useEffect(() => {\n    checkToken();\n  }, []);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard({ name: card.name, link: card.link });\n  }\n\n  function handleDeletePostClick(card) {\n    setIsDeletePostPopupOpen(true);\n    setDeletedCard({ _id: card._id });\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsDeletePostPopupOpen(false);\n    setIsInfoPopupOpen(false);\n    setSelectedCard({ name: \"\", link: \"\" });\n  }\n\n  React.useEffect(() => {\n    const closeByEscape = (e) => {\n      if (e.key === \"Escape\") {\n        closeAllPopups();\n      }\n    };\n\n    document.addEventListener(\"keydown\", closeByEscape);\n\n    return () => document.removeEventListener(\"keydown\", closeByEscape);\n  }, []);\n\n  function handleUpdateUser(newData) {\n    api\n      .setUserInfo(newData)\n      .then((res) => {\n        setCurrentUser({\n          name: res.name,\n          about: res.about,\n          avatar: res.avatar,\n          _id: res._id,\n        });\n        closeAllPopups();\n      })\n      .catch(console.log);\n  }\n\n  function handleUpdateAvatar(newData) {\n    api\n      .setUserAvatar(newData)\n      .then((res) => {\n        if (res) {\n        setCurrentUser({\n          name: res.name,\n          about: res.about,\n          avatar: res.avatar,\n          _id: res._id,\n        });} else {\n          console.log(\"invalid avatar link\")\n        }\n        closeAllPopups();\n      })\n      .catch(console.log);\n  }\n\n  function handleCardLike(card) {\n    // Check if card was already liked:\n    const isLiked = card.likes.some((id) => id === currentUser._id);\n    // Send a request to the API and getting the updated card data\n    api\n      .changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        setCards((cardsState) =>\n          cardsState.map((item) => (item._id === card._id ? newCard : item))\n        );\n      })\n      .catch(console.log);\n  }\n\n  function handleCardDelete() {\n    api\n      .deleteCard(deleteCard._id)\n      .then(() => {\n        const newCards = cards.filter((item) => item._id !== deleteCard._id);\n        setCards(newCards);\n        closeAllPopups();\n      })\n      .catch(console.log);\n  }\n\n  function handleAddPlaceSubmit(newData) {\n    api\n      .createNewCard(newData)\n      .then((newCard) => {\n        if(Array.isArray(newCard)) {\n        setCards([newCard, ...cards]);\n        }\n        else {\n          console.log('invalid card link')\n        }\n        closeAllPopups();\n      })\n      .catch(console.log);\n  }\n\n  function handleLogin(values) {\n    auth\n      .authorize(values)\n      .then(checkToken)\n      .catch((err) => {\n        console.log(err);\n        setIsInfoPopupOpen(true);\n      });\n  }\n\n  function handleLogOut(){\n    setLoggedIn(false);\n    localStorage.removeItem('jwt')\n  }\n\n  function handleRegister(values) {\n    auth\n      .register(values)\n      .then(() => {\n        history.push(\"/.signin\");\n        setInfoTitle(true);\n      })\n      .catch((err) => {\n        console.log(err);\n        setInfoTitle(false);\n      })\n      .finally(() => {\n        setIsInfoPopupOpen(true);\n      });\n  }\n\n  return (\n      <CurrentUserContext.Provider value={currentUser}>\n        <div className=\"content\">\n          <Switch>\n            <Route path=\"/signup\">\n              <Header link=\"/signin\" text=\"Log In\" loggedIn={loggedIn} />\n              <Register\n                onRegister={handleRegister}\n                onClose={closeAllPopups}\n                isOpen={isInfoPopupOpen}\n                isSuccess={infoTitle}\n              />\n            </Route>\n            <Route path=\"/signin\">\n              <Header link=\"/signup\" text=\"Sign Up\" loggedIn={loggedIn} />\n              <Login\n                onLogin={handleLogin}\n                onClose={closeAllPopups}\n                isOpen={isInfoPopupOpen}\n              />\n            </Route>\n            <ProtectedRoute path=\"/\" loggedIn={loggedIn}>\n              <Header\n                link=\"/signin\"\n                text=\"Log Out\"\n                loggedIn={loggedIn}\n                email={email}\n                onLogOut={handleLogOut}\n              />\n              <Main\n                onEditProfileClick={handleEditProfileClick}\n                onAddPlaceClick={handleAddPlaceClick}\n                onEditAvatarClick={handleEditAvatarClick}\n                onDeletePostClick={handleDeletePostClick}\n                onCardClick={handleCardClick}\n                cards={cards}\n                onCardLike={handleCardLike}\n              />\n              <Footer />\n\n              <section>\n                <EditProfilePopup\n                  isOpen={isEditProfilePopupOpen}\n                  onClose={closeAllPopups}\n                  onUpdateUser={handleUpdateUser}\n                />\n                <AddPlacePopup\n                  isOpen={isAddPlacePopupOpen}\n                  onClose={closeAllPopups}\n                  onAddPlaceSubmit={handleAddPlaceSubmit}\n                />\n                <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n                <DeletePostPopup\n                  isOpen={isDeletePostPopupOpen}\n                  onClose={closeAllPopups}\n                  onDeletePostSubmit={handleCardDelete}\n                />\n                <EditAvatarPopup\n                  isOpen={isEditAvatarPopupOpen}\n                  onClose={closeAllPopups}\n                  onUpdateAvatar={handleUpdateAvatar}\n                />\n              </section>\n            </ProtectedRoute>\n          </Switch>\n        </div>\n      </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}